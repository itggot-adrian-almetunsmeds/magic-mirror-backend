require 'rake'
require 'rspec/core/rake_task'
require 'yaml'
RSpec::Core::RakeTask.new(:spec) 

task :default  => :spec
task :test => :spec
# TODO: Make tests run on github even if they do not have the config file
p ENV
data = YAML.load_file "./configuration.yaml"
data["public_transport"]['reseplanerare']['api_key'] = ENV['API_KEY_RESEPLANERARE'].to_s
data["public_transport"]['stolptidstabeller']['api_key'] = ENV['API_KEY_STOLPTIDSTABELLER'].to_s
unless ENV['API_KEY_RESEPLANERARE'] == nil || ENV['API_KEY_STOLPTIDSTABELLER'] == nil
    File.open('./configuration.yaml', 'w') { |f| YAML.dump(data, f) }
end